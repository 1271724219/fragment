## 一 概念定义

本文主要讲解数学上的幂的对数的概念，以及如何在程序中进行运用

### 1. 幂

【幂】是指数运算的结果。n<sup>m</sup>看作乘方的结果，叫做 n 的 m 次幂 ，也叫 n 的 m 次方。当 m 为正整数时，n<sup>m</sup>代表 m 个 n 相乘；
当 m 为小数时 ，m 可以写成$\frac{a}{b}$(其中 a、b 为整数)，n<sup>m</sup>可以表示成：

n<sup>m</sup> = n<sup>$\frac{a}{b}$</sup> = $\sqrt[b]{a}$

在 c 语言中，我们可以利用函数 **pow(n,m)** 来计算 n 的 m 次幂

### 2.对数

**对数** 是对幂的逆运算。当 n 的 m 次方等于$T(n > 0，且 n ≠ 1) $ ，即 T = n<sup>m</sup>,那么数m叫做 “以 n为底 T的对数”，记作m = $log_nT$.其中 n 叫做对数的【底数】，T 叫做【真数】

在 C 语言中，我们可以利用函数 **log2(T)** 来计算以 2 为底 T 的对数；**log10(T)** 来计算以 10 为底 T 的对数。

### 3、换底公式

【换底公式】常用于对数运算中，如下：
$$log_ab = \frac{log_cb}{log_ca}$$
它的含义就是将底数从 a 换成了 c，证明比较简单，不再累述。所以在 C 语言中，如果我们要求以 a 为底 b 的对数，只需要将底换成 2 求解即可：`log2(b) / log2(a)`

## 二、题目描述

> 给定一个整数，写一个函数来判断它是否是 4 的幂。如果是，返回**true**；否则发回**false**。整数 n 是 4 的幂次方需满足：存在整数 x 使得$n = 4^x$

## 三、算法讲解

根据上文中的对数的定义，x 是以 4 为底 n 的对数，也就是$log_4n$,利用换底公式，我们可以把他换成以 2 为底的方便程序计算，即：
$$log_4n = \frac{log_2n}{log_24}$$

那么，我们可以求出$log_4n$的整数部分 x，如果$4^x$和 n 相等，则说明 n 是 4 的幂，这里需要注意，相等的判定是建立在浮点数之间的，两个浮点数的判等需要采用如下方式

$$fabs(a-b)<0.0000001$$

即当两个数的差的绝对小于某个精度才认为它们相等。

## 四、源码剖析

```cpp
bool isPowerOfFour(int n){
    if(n == 0){
        return false;
    }
    int x = (int)(log2(n))/log2(4)+1e-8;
    return fabs(n - pow(4,x)) < 1e-8;
}

```

- (1) n = 0 的情况特殊判定
- (2) 换底公式，并且加上一个精度，避免精度损失导致取整出错；
- (3)浮点数的相等判定；
